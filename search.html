---
layout: min
---

<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.44.0"></script>
<script
    src="https://cdn.jsdelivr.net/npm/typesense-instantsearch-adapter@2/dist/typesense-instantsearch-adapter.min.js"></script>


<script type="text/javascript" language="JavaScript">

    var nextId = 0;

    function toggle(id) {
        $(`#details${id}`).toggle();
        var button = $(`#showMore${id}`);

        if (button.hasClass("expanded")) {
            button.text("Show more");
            button.removeClass("expanded");
        } else {
            button.text("Show less");
            button.addClass("expanded");
        }
    }

    function humanizeCount(count) {
        if (count < 1e3) return count; // Less than 1,000
        if (count >= 1e3 && count < 1e6) return (count / 1e3).toFixed(1) + 'K'; // Thousands
        if (count >= 1e6 && count < 1e9) return (count / 1e6).toFixed(1) + 'M'; // Millions
        if (count >= 1e9 && count < 1e12) return (count / 1e9).toFixed(1) + 'B'; // Billions
        return count.toFixed(1) + 'T'; // Trillions (and beyond)
    }


    // Search

    addEventListener("DOMContentLoaded", (event) => {

        const typesenseInstantSearchAdapter = new TypesenseInstantSearchAdapter({
            server: {
                apiKey: '8kn384jvMx0QeP1rDfaZO1u3N21ntXOr', // Be sure to use an API key that only allows searches, in production
                nodes: [
                    {
                        host: '0fpg9nu41dat6boep.a1.typesense.net',
                        port: '443',
                        protocol: 'https',
                    },
                ],
            },
            additionalSearchParameters: {
            query_by: 'title,h1,summary,keywords,h2,h3,h4,h5,h6,text',
            sort_by: '_text_match(buckets: 10):desc',
            text_match_type: 'max_weight',
            prioritize_exact_match: false
           },
        });

        const searchClient = typesenseInstantSearchAdapter.searchClient;

        const search = instantsearch({
            searchClient,
            indexName: "metalamawebA",
            routing: true
        });

       

        search.addWidgets([
        

            instantsearch.widgets.searchBox({
                container: '#searchbox',
                showSubmit: false,
                showReset: false,
                placeholder: 'Filter by keyword...',
                autofocus: false,
                cssClasses: {
                    input: '',
                    loadingIcon: 'stroke-primary',
                },
            }),
            instantsearch.widgets.configure({
                hitsPerPage: 20,
            }),
            instantsearch.widgets.hits({
                container: '#hits',
                templates: {
                    item(item) {
                        return `
                            <div>
                                <div class="hit-title">
                                    <a href="${item.link}">${item._highlightResult.title.value}</a>
                                </div>
                                <div class="hit-summary">
                                    ${item._highlightResult.summary.value}
                                </div>
                            </div>
                        `;
                    },
            },
                cssClasses: {
                    list: '',
                    item: 'search-result-card',
                    loadMore: 'load-more',
                    disabledLoadMore: 'load-more disabled',
                }
            }),
            instantsearch.widgets.pagination({
                container: '#pagination',
                cssClasses: {
                    list: "",
                    item: "",
                    link: "",
                    disabledItem: "disabled",
                    selectedItem: "selected"
                }
            }),
        ]);

        search.start();

    });
</script>


<main role="main" class="searchPage">

    <section>
        <div class="container">
            <div class="search">
                <div class="principal">
                    <h1>Metalama Search</h1>
                    <div id="searchbox"></div>
                    <div id="stats"></div>
                    <div id="hits-per-page"></div>
                    <div id="sort-by"></div>
                    <div id="hits"></div>
                    <div id="pagination"></div>
                </div>
            </div>
        </div>

    </section>

</main>